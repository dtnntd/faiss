# Vietnamese Text Search Dataset

Thư mục này chứa tools để tạo và embedding Vietnamese text dataset cho FAISS demo.

## Files

- `vietnamese_dataset_generator.py` - Generate Vietnamese text dataset
- `embed_vietnamese_text.py` - Create embeddings với Google API
- `vietnamese_dataset.txt` - Generated text chunks (auto-generated)
- `vietnamese_embeddings.npy` - Embeddings array (auto-generated)
- `vietnamese_embeddings_texts.txt` - Text corpus (auto-generated)

## Quick Start

### 1. Generate Dataset

```bash
python vietnamese_dataset_generator.py
```

Tạo ra ~2000 chunks văn bản tiếng Việt về các chủ đề:
- Công nghệ (AI, Machine Learning, Cloud)
- Kinh doanh (Startup, E-commerce, Marketing)
- Giáo dục (Online learning, STEM, Skills)
- Sức khỏe (Fitness, Nutrition, Mental health)
- Môi trường (Climate, Renewable energy, Recycling)

### 2. Setup Google API Key

Lấy API key từ: https://makersuite.google.com/app/apikey

Tạo file `.env` ở root directory:
```bash
GOOGLE_API_KEY=your_api_key_here
```

### 3. Create Embeddings

```bash
pip install google-generativeai python-dotenv

python embed_vietnamese_text.py
```

Options:
```bash
# Use specific model
python embed_vietnamese_text.py --model models/text-embedding-004

# Custom input/output
python embed_vietnamese_text.py --input my_texts.txt --output my_embeddings.npy
```

### 4. Run Vietnamese Search Demo

Mở và chạy notebook:
```bash
jupyter notebook ../examples/07_vietnamese_search_demo.ipynb
```

## Dataset Details

### Text Generation
- **Base sentences**: 50 curated Vietnamese sentences per topic
- **Total texts**: 1000 (generated by combining and extending base sentences)
- **Total chunks**: ~2000 (after chunking with overlap)
- **Chunk size**: ~80 characters average
- **Topics**: 5 main categories

### Embedding
- **Model**: Google `text-embedding-004`
- **Dimension**: 768
- **API**: Google Generative AI
- **Task type**: `retrieval_document` for indexing, `retrieval_query` for search
- **Normalization**: L2 normalized for cosine similarity

### Memory Usage
- **Text storage**: ~200KB
- **Embeddings**: ~6MB (2000 vectors × 768 dim × 4 bytes)

## Advanced Usage

### Custom Dataset

Tạo dataset riêng:

```python
from vietnamese_dataset_generator import create_chunks

# Your texts
my_texts = [
    "Câu tiếng Việt thứ nhất",
    "Câu tiếng Việt thứ hai",
    # ...
]

# Create chunks
chunks = create_chunks(my_texts, chunk_size=100, overlap=20)

# Save
with open('my_dataset.txt', 'w', encoding='utf-8') as f:
    for chunk in chunks:
        f.write(chunk + '\n')
```

### Batch Embedding

```python
from embed_vietnamese_text import embed_with_google_api
import numpy as np

texts = ["text 1", "text 2", ...]
embeddings = embed_with_google_api(texts)

# Save
np.save('my_embeddings.npy', embeddings)
```

### Query Embedding

```python
from embed_vietnamese_text import embed_query

query_embedding = embed_query("tìm kiếm gì đó")
# Returns numpy array, shape (1, 768)
```

## Troubleshooting

### API Key Error
```
ValueError: GOOGLE_API_KEY not found
```
**Solution**: Make sure `.env` file exists in root directory with valid API key.

### Import Error
```
ImportError: No module named 'google.generativeai'
```
**Solution**: Install dependencies:
```bash
pip install google-generativeai python-dotenv
```

### Rate Limiting
If you hit rate limits:
- Reduce batch size in `embed_vietnamese_text.py`
- Add longer sleep between batches
- Get higher quota API key

## Cost Estimation

Google Embedding API pricing (as of 2024):
- **Free tier**: 1000 requests/day
- **Paid**: Very cheap, ~$0.00002 per 1K characters

For this dataset (~2000 texts × 80 chars):
- **Total characters**: ~160K
- **Cost**: ~$0.0032 (basically free!)

## Future Improvements

- [ ] Support other embedding models (OpenAI, Cohere, local models)
- [ ] Add multilingual support
- [ ] Implement caching layer
- [ ] Add data augmentation techniques
- [ ] Support streaming for large datasets
- [ ] Add metadata support (date, category, author)

## References

- [Google Generative AI Python SDK](https://github.com/google/generative-ai-python)
- [Google AI Studio](https://makersuite.google.com/)
- [FAISS Documentation](https://faiss.ai/)
